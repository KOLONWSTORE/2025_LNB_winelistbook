<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì™€ì¸ ì¶”ì²œ í•„í„°ë§ ì‹œìŠ¤í…œ (ì—…ê·¸ë ˆì´ë“œ)</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #722f37;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #722f37;
            padding-bottom: 10px;
        }

        /* ë©”ì¸ ë ˆì´ì•„ì›ƒ (í•„í„°ì™€ ê²°ê³¼) */
        .main-layout {
            display: flex;
            gap: 20px;
        }

        /* í•„í„° ì‚¬ì´ë“œë°” */
        #filter-sidebar {
            width: 280px; /* í­ì„ ì¡°ê¸ˆ ë„“í˜ */
            flex-shrink: 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .filter-group {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #e0e0e0;
        }
        .filter-group h3 {
            color: #722f37;
            padding-bottom: 5px;
            margin-top: 5px;
            margin-bottom: 10px;
            font-size: 1.2em;
            font-weight: bold;
        }
        h4 {
            color: #5c262c;
            font-size: 1em;
            margin-top: 10px;
            margin-bottom: 5px;
        }
        .filter-option {
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }
        .filter-option input[type="checkbox"] {
            margin-right: 8px;
        }
        
        /* ë‹¹ë„ 1~5 ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .sweetness-scale {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }
        .sweetness-scale input[type="checkbox"] {
            display: none;
        }
        .sweetness-scale label {
            display: block;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            background-color: #fff;
            transition: background-color 0.2s;
            font-size: 0.9em;
        }
        .sweetness-scale input[type="checkbox"]:checked + label {
            background-color: #722f37;
            color: white;
            border-color: #5c262c;
        }


        /* ê²€ìƒ‰ì°½ ë° ê²°ê³¼ ì˜ì—­ */
        #results-container {
            flex-grow: 1;
        }
        #search-box {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 2px solid #722f37; /* ê°•ì¡° */
            border-radius: 6px;
            font-size: 1.1em;
            box-sizing: border-box;
        }
        #wine-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        /* ì™€ì¸ ì¹´ë“œ ìŠ¤íƒ€ì¼ (ì´ì „ê³¼ ë™ì¼) */
        .wine-card {
            display: flex; 
            border: 1px solid #eee;
            border-left: 5px solid #722f37; 
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            background-color: #fff;
            transition: transform 0.2s;
        }
        .wine-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .card-thumbnail {
            width: 80px; 
            height: auto;
            margin-right: 15px;
            flex-shrink: 0; 
        }
        .card-thumbnail img {
            width: 100%;
            height: 100px; 
            object-fit: contain; 
            border: 1px solid #f0f0f0;
            border-radius: 4px;
        }
        .card-details {
            flex-grow: 1;
        }
        .card-name {
            font-size: 1.1em; 
            font-weight: bold;
            color: #5c262c;
            margin-bottom: 5px;
        }
        .card-info {
            font-size: 0.8em; 
            margin-top: 5px;
        }
        .card-info span {
            display: inline-block;
            margin-right: 10px;
            color: #555;
        }
        .card-price {
            font-weight: bold;
            color: #e74c3c;
            font-size: 1em;
            margin-top: 5px;
        }
        .card-tn {
            margin-top: 10px;
            padding-top: 5px;
            border-top: 1px dashed #eee;
            font-style: italic;
            color: #777;
            font-size: 0.8em; 
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2; 
            -webkit-box-orient: vertical;
        }
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 50px;
            color: #999;
            font-size: 1.2em;
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
        @media (max-width: 800px) {
            .main-layout {
                flex-direction: column;
            }
            #filter-sidebar {
                width: 100%;
                margin-bottom: 20px;
            }
            #wine-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ·ì½”ì˜¤ë¡±í‹°ìŠˆì§„L&B ì™€ì¸ ë¦¬ìŠ¤íŠ¸ë¶ğŸ·</h1>
        
        <div class="main-layout">
            
            <div id="filter-sidebar">
                <h2>ì™€ì¸ ì°¾ê¸°</h2>
                
                <div class="filter-group">
                    <h3>ì¢…ë¥˜ / ë‹¹ë„ ì„ íƒ</h3>
                    
                    <h4>ì™€ì¸ ì¢…ë¥˜ (Type)</h4>
                    <div id="type-filters">
                        <div class="filter-option"><input type="checkbox" name="type" value="ë ˆë“œ"> ë ˆë“œ</div>
                        <div class="filter-option"><input type="checkbox" name="type" value="í™”ì´íŠ¸"> í™”ì´íŠ¸</div>
                        <div class="filter-option"><input type="checkbox" name="type" value="ìŠ¤íŒŒí´ë§"> ìƒ´í˜ì¸ & ìŠ¤íŒŒí´ë§</div>
                    </div>
                    
                    <h4>ë‹¹ë„ (Sweetness) <small>(1=Dry, 5=Sweet)</small></h4>
                    <div class="sweetness-scale" id="sweetness-filters">
                        <input type="checkbox" id="sweetness-1" name="sweetness" value="1"><label for="sweetness-1">1</label>
                        <input type="checkbox" id="sweetness-2" name="sweetness" value="2"><label for="sweetness-2">2</label>
                        <input type="checkbox" id="sweetness-3" name="sweetness" value="3"><label for="sweetness-3">3</label>
                        <input type="checkbox" id="sweetness-4" name="sweetness" value="4"><label for="sweetness-4">4</label>
                        <input type="checkbox" id="sweetness-5" name="sweetness" value="5"><label for="sweetness-5">5</label>
                    </div>
                </div>
                
                <div class="filter-group">
                    <h3>êµ­ê°€ (Country)</h3>
                    <div id="country-filters"></div>
                </div>

                <button onclick="clearFilters()" style="width:100%; padding: 10px; margin-top: 20px; background-color:#ccc; border:none; border-radius: 6px; cursor: pointer;">í•„í„° ì´ˆê¸°í™”</button>
            </div>

            <div id="results-container">
                <h3>3. ìƒí’ˆ ì„ íƒ (ì™€ì¸ ê²€ìƒ‰)</h3>
                <input type="text" id="search-box" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”." onkeyup="filterWines()">
                
                <div id="wine-list">
                    </div>
            </div>

        </div>

    </div>

    <script>
        // === ì™€ì¸ ë°ì´í„° (JSON) ===
        // NOTE: ë‹¹ë„(Sweetness)ë¥¼ 1~5ì˜ ìˆ«ìë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. (1=Dry, 5=Sweet)
        const WINE_DATA = [
            // í”„ë‘ìŠ¤ (ë ˆë“œ/ë“œë¼ì´)
            { "êµ­ê°€": "í”„ë‘ìŠ¤", "ì´ë¦„": "ë ˆì •ë“œ ì•Œ ë½€ì´ì•½ (ë½€ì•½ AOC)", "ê°€ê²©": 65000, "ë¶„ë¥˜": "ë ˆë“œ", "ë„ìˆ˜": "14%", "TN": "í´ë˜ì‹í•œ ë³´ë¥´ë„ ë¸”ë Œë“œ, ì²´ë¦¬ ë¸”ë£¨ë² ë¦¬Â·ê°ì´ˆÂ·í‘ì—°", "í‰ì ": "4.0/5.0", "ë°”ë””": "full", "imgSrc": "images/france_pauillac.png", "ë‹¹ë„": 1 },
            { "êµ­ê°€": "í”„ë‘ìŠ¤", "ì´ë¦„": "CH.ì˜¤ ë¸Œë¦¬ì˜¹ 2014 (ë»¬ì‚­ ë ˆì˜¤ëƒ¥ 1GCC)", "ê°€ê²©": 1247000, "ë¶„ë¥˜": "ë ˆë“œ", "ë„ìˆ˜": "14%", "TN": "í‘ì—°, ì‹œê°€ë°•ìŠ¤, ë¸”ë™ì»¤ëŸ°íŠ¸", "í‰ì ": "4.6/5.0", "ë°”ë””": "full", "imgSrc": "images/france_hautbrion.png", "ë‹¹ë„": 1 },
            { "êµ­ê°€": "í”„ë‘ìŠ¤", "ì´ë¦„": "ì—  ìƒ¤í‘¸í‹°ì— ì§€ê³µë‹¤ìŠ¤", "ê°€ê²©": 54000, "ë¶„ë¥˜": "ë ˆë“œ", "ë„ìˆ˜": "15%", "TN": "ìŠ¤íŒŒì´ì‹œ, ë¶‰ì€ ê³¼ì‹¤, í—ˆë¸Œ, ê¸´ ì—¬ìš´", "í‰ì ": "4.0/5.0", "ë°”ë””": "full", "imgSrc": "images/france_gigondas.png", "ë‹¹ë„": 1 },
            // í”„ë‘ìŠ¤ (ìŠ¤íŒŒí´ë§/ë“œë¼ì´)
            { "êµ­ê°€": "í”„ë‘ìŠ¤", "ì´ë¦„": "í´ë¡œì ¸ ìƒ¹íŒŒë‰´ ë¸Œë¤¼ ë¦¬ì €ë¸Œ", "ê°€ê²©": 75000, "ë¶„ë¥˜": "ìŠ¤íŒŒí´ë§", "ë„ìˆ˜": "12%", "TN": "ì‚¬ê³¼, ë ˆëª¬ê³¼ í¬ë¦¬ë¯¸í•œ ë¬´ìŠ¤", "í‰ì ": "4.2/5.0", "ë°”ë””": "medium", "imgSrc": "images/france_champagne.png", "ë‹¹ë„": 1 },
            
            // ë¯¸êµ­ (ë ˆë“œ)
            { "êµ­ê°€": "ë¯¸êµ­", "ì´ë¦„": "ë² ë¦°ì € ë‚˜íŒŒë°¸ë¦¬ ì¹´ë² ë¥´ë„¤ ì†Œë¹„ë‡½ ë¸”ë™ë¼ë²¨", "ê°€ê²©": 139000, "ë¶„ë¥˜": "ë ˆë“œ", "ë„ìˆ˜": "15%", "TN": "ë¸”ë™ë² ë¦¬, ë¯¼íŠ¸, ë°”ë‹ë¼, í’€ë°”ë””", "í‰ì ": "4.2/5.0", "ë°”ë””": "full", "imgSrc": "images/usa_beringer.png", "ë‹¹ë„": 3 }, // Off-Dry -> 3
            { "êµ­ê°€": "ë¯¸êµ­", "ì´ë¦„": "ì¡°ì…‰ í í”„ìŠ¤ ë‚˜íŒŒ ë°¸ë¦¬ ê¹Œë² ë¥´ë„¤ ì†Œë¹„ë‡½", "ê°€ê²©": 129000, "ë¶„ë¥˜": "ë ˆë“œ", "ë„ìˆ˜": "15%", "TN": "ë¸”ë™ì²´ë¦¬ ë¸”ë™ë² ë¦¬, ë°”ë‹ë¼, ìŠ¤íŒŒì´ìŠ¤, íƒ„ë‹Œ", "í‰ì ": "4.5/5.0", "ë°”ë””": "full", "imgSrc": "images/usa_phelps.png", "ë‹¹ë„": 1 },
            { "êµ­ê°€": "ë¯¸êµ­", "ì´ë¦„": "ë©”ì´ì˜¤ë¯¸ í”¼ë…¸ëˆ„ì•„ 2022", "ê°€ê²©": 46500, "ë¶„ë¥˜": "ë ˆë“œ", "ë„ìˆ˜": "14%", "TN": "ë¼ì¦ˆë² ë¦¬, ë°”ë‹ë¼, ìŠ¤íŒŒì´ìŠ¤", "í‰ì ": "4.0/5.0", "ë°”ë””": "light", "imgSrc": "images/usa_meiomi.png", "ë‹¹ë„": 1 },
            
            // ì´íƒˆë¦¬ì•„ (ë ˆë“œ/ë“œë¼ì´)
            { "êµ­ê°€": "ì´íƒˆë¦¬ì•„", "ì´ë¦„": "ì†”ë¼ì´ì•„ 2008 (ìˆ˜í¼ íˆ¬ìŠ¤ì¹¸ IGT)", "ê°€ê²©": 632000, "ë¶„ë¥˜": "ë ˆë“œ", "ë„ìˆ˜": "15%", "TN": "ë†ì¶•ëœ ê³¼ì‹¤, ìŠ¤íŒŒì´ìŠ¤, ì˜¤í¬", "í‰ì ": "4.6/5.0", "ë°”ë””": "full", "imgSrc": "images/italy_solaia.png", "ë‹¹ë„": 1 },
            { "êµ­ê°€": "ì´íƒˆë¦¬ì•„", "ì´ë¦„": "ì‚¬ì„¸í‹° ë¦¬ë¹„ì˜¤ ë¸Œë£¨ë„¬ë¡œ ë”” ëª¬íƒˆì¹˜ë…¸ 2017", "ê°€ê²©": 165000, "ë¶„ë¥˜": "ë ˆë“œ", "ë„ìˆ˜": "15%", "TN": "ì²´ë¦¬, í—ˆë¸Œ, ìŠ¤íŒŒì´ìŠ¤, ê¸´ ìˆ™ì„±", "í‰ì ": "4.5/5.0", "ë°”ë””": "full", "imgSrc": "images/italy_sassetti.png", "ë‹¹ë„": 1 },
            // ì´íƒˆë¦¬ì•„ (ìŠ¤íŒŒí´ë§/ìŠ¤ìœ„íŠ¸)
            { "êµ­ê°€": "ì´íƒˆë¦¬ì•„", "ì´ë¦„": "ëª¨ìŠ¤ì¹´í†  ë‹¤ìŠ¤í‹°", "ê°€ê²©": 25000, "ë¶„ë¥˜": "ìŠ¤íŒŒí´ë§", "ë„ìˆ˜": "6%", "TN": "ë³µìˆ­ì•„Â·ì—´ëŒ€ê³¼ì¼ í–¥, ë‹¬ì½¤í•˜ê³  ë¶€ë“œëŸ¬ìš´ ë²„ë¸”", "í‰ì ": "3.8/5.0", "ë°”ë””": "light", "imgSrc": "images/italy_moscato.png", "ë‹¹ë„": 5 }, // Sweet -> 5

            // ì¹ ë ˆ (í™”ì´íŠ¸/ë“œë¼ì´)
            { "êµ­ê°€": "ì¹ ë ˆ", "ì´ë¦„": "ì•„ìš°í„° ë¦¬ë¯¸ì¸  ì„¸ë¯¸ìš©", "ê°€ê²©": 33000, "ë¶„ë¥˜": "í™”ì´íŠ¸", "ë„ìˆ˜": "13%", "TN": "ë ˆëª¬Â·ë¼ì„, ê·¸ë¦°ì• í”ŒÂ·ë°°, ë¯¸ë„¤ë„Â·ì„íšŒê°", "í‰ì ": "4.0/5.0", "ë°”ë””": "light", "imgSrc": "images/chile_semillon.png", "ë‹¹ë„": 1 }
        ];

        // DOM ìš”ì†Œ
        const wineListElement = document.getElementById('wine-list');
        const searchBox = document.getElementById('search-box');

        document.addEventListener('DOMContentLoaded', () => {
            populateCountryFilters();
            // ëª¨ë“  ì²´í¬ë°•ìŠ¤ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            document.querySelectorAll('input[type="checkbox"]').forEach(input => {
                input.addEventListener('change', filterWines);
            });
            filterWines(); 
        });

        /**
         * êµ­ê°€ í•„í„° ë™ì  ìƒì„±
         */
        function populateCountryFilters() {
            const countries = [...new Set(WINE_DATA.map(wine => wine.êµ­ê°€))].sort();
            const container = document.getElementById('country-filters');

            countries.forEach(country => {
                const div = document.createElement('div');
                div.className = 'filter-option';
                div.innerHTML = `
                    <input type="checkbox" id="country-${country}" name="country" value="${country}">
                    <label for="country-${country}">${country}</label>
                `;
                container.appendChild(div);
            });
        }

        /**
         * 2. ë©”ì¸ í•„í„°ë§ ë¡œì§ (1ë²ˆ, 2ë²ˆ, 3ë²ˆ í•­ëª©ì— ë§ì¶¤)
         */
        function filterWines() {
            // 1ë²ˆ ê·¸ë£¹
            const selectedTypes = getSelectedFilters('type');
            const selectedSweetness = getSelectedSweetnessFilters(); 
            
            // 2ë²ˆ ê·¸ë£¹
            const selectedCountries = getSelectedFilters('country');
            
            // 3ë²ˆ ê·¸ë£¹ (ê²€ìƒ‰)
            const searchTerm = searchBox.value.toLowerCase().trim();

            const filteredWines = WINE_DATA.filter(wine => {
                // 1) ì¢…ë¥˜ í•„í„°ë§
                const typeMatch = selectedTypes.length === 0 || selectedTypes.includes(wine.ë¶„ë¥˜);
                
                // 2) ë‹¹ë„ í•„í„°ë§ (1~5)
                const sweetnessMatch = selectedSweetness.length === 0 || selectedSweetness.includes(String(wine.ë‹¹ë„)); // ë‹¹ë„(ìˆ«ì)ë¥¼ ë¬¸ìì—´ë¡œ ë¹„êµ

                // 3) êµ­ê°€ í•„í„°ë§
                const countryMatch = selectedCountries.length === 0 || selectedCountries.includes(wine.êµ­ê°€);

                // 4) ìƒí’ˆ ê²€ìƒ‰ í•„í„°ë§ (ì™€ì¸ ì´ë¦„, TN, ë¶„ë¥˜, êµ­ê°€ í¬í•¨)
                const searchMatch = !searchTerm || 
                    wine.ì´ë¦„.toLowerCase().includes(searchTerm) ||
                    wine.TN.toLowerCase().includes(searchTerm) ||
                    wine.ë¶„ë¥˜.toLowerCase().includes(searchTerm) ||
                    wine.êµ­ê°€.toLowerCase().includes(searchTerm);

                return typeMatch && sweetnessMatch && countryMatch && searchMatch;
            });

            renderWineList(filteredWines);
        }

        /**
         * ì„ íƒëœ ì²´í¬ë°•ìŠ¤ ê°’ë“¤ì„ ë°°ì—´ë¡œ ë°˜í™˜
         */
        function getSelectedFilters(name) {
            const checked = document.querySelectorAll(`input[name="${name}"]:checked`);
            return Array.from(checked).map(input => input.value);
        }
        
        /**
         * ë‹¹ë„ í•„í„° (1~5) ê°’ì„ ë°°ì—´ë¡œ ë°˜í™˜
         */
        function getSelectedSweetnessFilters() {
            // ë‹¹ë„ í•„í„°ëŠ” valueê°€ 1, 2, 3, 4, 5ì¸ ë¬¸ìì—´ì„ ë°˜í™˜
            return getSelectedFilters('sweetness');
        }

        /**
         * 3. ê²°ê³¼ ëª©ë¡ ë Œë”ë§
         */
        function renderWineList(wines) {
            wineListElement.innerHTML = ''; // ëª©ë¡ ì´ˆê¸°í™”

            if (wines.length === 0) {
                wineListElement.innerHTML = '<p class="no-results">ğŸ˜¢ ì¡°ê±´ì— ë§ëŠ” ì¶”ì²œ ì™€ì¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            wines.forEach(wine => {
                const card = document.createElement('div');
                card.className = 'wine-card';
                card.innerHTML = `
                    <div class="card-thumbnail">
                        <img src="${wine.imgSrc}" alt="${wine.ì´ë¦„} ì´ë¯¸ì§€" onerror="this.onerror=null; this.src='images/default_bottle.png';">
                    </div>
                    
                    <div class="card-details">
                        <div class="card-name">${wine.ì´ë¦„}</div>
                        <div class="card-info">
                            <span>${wine.êµ­ê°€} / ${wine.ë¶„ë¥˜}</span>
                            <span>ë„ìˆ˜: ${wine.ë„ìˆ˜}</span>
                            <span>ë‹¹ë„: ğŸ­ ${wine.ë‹¹ë„} / 5</span>
                            <span>í‰ì : â­ï¸ ${wine.í‰ì }</span>
                        </div>
                        <div class="card-price">ê°€ê²©: â‚©${wine.ê°€ê²©.toLocaleString()}</div>
                        <div class="card-tn">${wine.TN}</div>
                    </div>
                `;
                wineListElement.appendChild(card);
            });
        }
        
        /**
         * í•„í„° ì´ˆê¸°í™”
         */
        function clearFilters() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            searchBox.value = '';
            filterWines(); // ì´ˆê¸°í™” í›„ í•„í„°ë§ ì¬ì‹¤í–‰
        }

    </script>
</body>
</html>
